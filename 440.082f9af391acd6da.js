"use strict";(self.webpackChunkoneaj_angular=self.webpackChunkoneaj_angular||[]).push([[440],{6440:(P,l,a)=>{a.r(l),a.d(l,{ApDashboardModule:()=>k});var d=a(6895),g=a(4940);class p{constructor(){this.type_wise_amount={type:[],amount:[]},this.category_wise_outstanding={category:[],amount:[]},this.vendor_wise_outstanding={vendor_name:[],amount:[]},this.agening_amount_percentage={},this.agening_amount={}}}var r=a(433),t=a(8256),m=a(529),h=a(5620),f=a(7556),u=a(6205);function b(n,i){if(1&n&&(t.TgZ(0,"div",15),t._UZ(1,"apx-chart",16),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("series",e.categoryWiseOutstanding.series)("chart",e.categoryWiseOutstanding.chart)("markers",e.categoryWiseOutstanding.markers)("dataLabels",e.categoryWiseOutstanding.dataLabels)("stroke",e.categoryWiseOutstanding.stroke)("colors",e.categoryWiseOutstanding.colors)("title",e.categoryWiseOutstanding.title)("xaxis",e.categoryWiseOutstanding.xaxis)}}function v(n,i){1&n&&(t.TgZ(0,"div",17)(1,"div",18)(2,"span",19),t._uU(3,"Loading..."),t.qZA()()())}function A(n,i){if(1&n&&(t.TgZ(0,"div",15),t._UZ(1,"apx-chart",20),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("series",e.vendorWiseOutstanding.series)("chart",e.vendorWiseOutstanding.chart)("xaxis",e.vendorWiseOutstanding.xaxis)("stroke",e.vendorWiseOutstanding.stroke)("plotOptions",e.vendorWiseOutstanding.plotOptions)("dataLabels",e.vendorWiseOutstanding.dataLabels)("yaxis",e.vendorWiseOutstanding.yaxis)("labels",e.vendorWiseOutstanding.labels)("legend",e.vendorWiseOutstanding.legend)("title",e.vendorWiseOutstanding.title)("subtitle",e.vendorWiseOutstanding.subtitle)("colors",e.vendorWiseOutstanding.colors)}}function _(n,i){1&n&&(t.TgZ(0,"div",17)(1,"div",18)(2,"span",19),t._uU(3,"Loading..."),t.qZA()()())}function y(n,i){if(1&n&&(t.TgZ(0,"div",15),t._UZ(1,"apx-chart",21),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("series",e.typeWiseAmount.series)("chart",e.typeWiseAmount.chart)("labels",e.typeWiseAmount.labels)("responsive",e.typeWiseAmount.responsive)}}function x(n,i){1&n&&(t.TgZ(0,"div",17)(1,"div",18)(2,"span",19),t._uU(3,"Loading..."),t.qZA()()())}function O(n,i){if(1&n&&(t.TgZ(0,"div",15),t._UZ(1,"apx-chart",22),t.qZA()),2&n){const e=t.oxw();t.xp6(1),t.Q6J("series",e.ageningAmount.series)("chart",e.ageningAmount.chart)("yaxis",e.ageningAmount.yaxis)("xaxis",e.ageningAmount.xaxis)("labels",e.ageningAmount.labels)("stroke",e.ageningAmount.stroke)("title",e.ageningAmount.title)("dataLabels",e.ageningAmount.dataLabels)("fill",e.ageningAmount.fill)("tooltip",e.ageningAmount.tooltip)}}function Z(n,i){1&n&&(t.TgZ(0,"div",17)(1,"div",18)(2,"span",19),t._uU(3,"Loading..."),t.qZA()()())}function C(n,i){if(1&n){const e=t.EpF();t.TgZ(0,"div",23)(1,"div",24)(2,"div",10)(3,"div",4)(4,"h2",25),t._uU(5,"Fillter"),t.qZA()(),t.TgZ(6,"div",4)(7,"button",26),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.fillter=!s.fillter)}),t._UZ(8,"i",27),t.qZA()()(),t.TgZ(9,"form",28)(10,"label",29),t._uU(11,"From Date"),t.qZA(),t._UZ(12,"input",30),t.TgZ(13,"label",31),t._uU(14,"To Date"),t.qZA(),t._UZ(15,"input",32),t.TgZ(16,"input",33),t.NdJ("click",function(){t.CHM(e);const s=t.oxw();return t.KtG(s.applyFilter())}),t.qZA()()()()}if(2&n){const e=t.oxw();t.xp6(9),t.Q6J("formGroup",e.filterForm)}}const W=[{path:"",component:(()=>{class n{constructor(e,o,s,J){this.apiService=e,this.commonService=o,this.auth=s,this.formbuilder=J,this.fillter=!1,this.loading=!1,this.AP=new p,this.filterForm=this.formbuilder.group({from_date:["",[r.kI.required]],to_date:["",[r.kI.required]]})}ngOnInit(){this.filterForm.patchValue(JSON.parse(String(localStorage.getItem("apFilter")))),this.loadData()}applyFilter(){localStorage.setItem("apFilter",JSON.stringify(this.filterForm.value)),console.log(this.filterForm),this.fillter=!this.fillter,this.loadData()}fillterReset(){localStorage.setItem("apFilter",JSON.stringify({from_date:"",to_date:""})),this.filterForm.reset(),this.loadData()}loadData(){this.loading=!0;let e=this.filterForm.value;e.tenant_id=this.auth.currentUserValue.tenantid,this.apiService.post("https://yxga6kjfm2.execute-api.ap-south-1.amazonaws.com/dashboard",JSON.stringify(e),{responseType:"text"}).subscribe({next:o=>{const s=JSON.parse(o);this.AP=s,setTimeout(()=>{this.categoryWiseOutstandingChart(),this.vendorWiseOutstandingChart(),this.typeWiseAmountChart(),this.ageningAmountChart()}),this.loading=!1},error:o=>console.log(o)})}categoryWiseOutstandingChart(){this.categoryWiseOutstanding={series:[{name:"Shipment Count",data:this.AP.category_wise_outstanding.amount}],chart:{height:300,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},grid:{borderColor:"#f1f1f1"},xaxis:{categories:this.AP.category_wise_outstanding.category}}}vendorWiseOutstandingChart(){this.vendorWiseOutstanding={series:[{name:"Shipment Count",data:this.AP.vendor_wise_outstanding.amount}],chart:{height:300,type:"bar",toolbar:{show:!1}},plotOptions:{bar:{horizontal:!0}},dataLabels:{enabled:!0},grid:{borderColor:"#f1f1f1"},xaxis:{categories:this.AP.vendor_wise_outstanding.vendor_name}}}typeWiseAmountChart(){this.typeWiseAmount={series:this.AP.type_wise_amount.amount,chart:{height:300,type:"donut"},labels:this.AP.type_wise_amount.type,responsive:[{breakpoint:480,options:{chart:{width:200},legend:{position:"bottom"}}}]}}ageningAmountChart(){const e=Object.keys(this.AP.agening_amount),o=Object.values(this.AP.agening_amount),s=Object.values(this.AP.agening_amount_percentage);this.ageningAmount={series:[{name:"Amount",type:"column",data:o},{name:"Percentage",type:"line",data:s}],chart:{height:350,type:"line"},stroke:{width:[0,4]},dataLabels:{enabled:!0,enabledOnSeries:[1]},labels:e,xaxis:{type:"string"},yaxis:[{title:{text:"Amount"}},{opposite:!0,title:{text:"Percentage"}}]}}}return n.\u0275fac=function(e){return new(e||n)(t.Y36(m.eN),t.Y36(h.v),t.Y36(f.h),t.Y36(r.qu))},n.\u0275cmp=t.Xpm({type:n,selectors:[["app-ap-dashboard"]],decls:36,vars:9,consts:[[1,"container-fluid","p-0","row"],[1,"col","bg-light"],[1,"col",2,"width","80vw !important","margin-left","2% !important"],[1,"row","p-4","bg-white"],[1,"col"],[1,"display-7"],[1,"col-2"],["href","#",1,"btn","btn-outline-dark","m-1",3,"click"],[1,"fa","fa-filter"],[1,"fa","fa-refresh"],[1,"row"],[1,"col","m-2","p-3","bg-white","border-radius-1",2,"overflow","hidden !important"],["class","card-body",4,"ngIf"],["class","d-flex justify-content-center",4,"ngIf"],["class","container-fluid p-5","id","fillter",4,"ngIf"],[1,"card-body"],[3,"series","chart","markers","dataLabels","stroke","colors","title","xaxis"],[1,"d-flex","justify-content-center"],["role","status",1,"spinner-border","m-5",2,"width","7rem","height","7rem"],[1,"sr-only"],[3,"series","chart","xaxis","stroke","plotOptions","dataLabels","yaxis","labels","legend","title","subtitle","colors"],[3,"series","chart","labels","responsive"],[3,"series","chart","yaxis","xaxis","labels","stroke","title","dataLabels","fill","tooltip"],["id","fillter",1,"container-fluid","p-5"],["id","filterInside",1,"container","p-5","w-50","m-auto"],[1,"text-white"],["id","closebtn",1,"btn","btn-outline-light","text-right",3,"click"],[1,"fas","fa-times-circle"],[1,"form-group","mt-5",3,"formGroup"],["for","",1,"text-white"],["type","month","name","from_date","id","from_date","formControlName","from_date",1,"form-control","mt-3"],["for","",1,"text-white","mt-4"],["type","month","name","to_date","id","to_date","formControlName","to_date",1,"form-control","mt-3"],["type","submit","value","Apply Fillter",1,"btn","btn-success","mt-4",3,"click"]],template:function(e,o){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),t._uU(6,"AP Dashboard"),t.qZA()(),t.TgZ(7,"div",6)(8,"button",7),t.NdJ("click",function(){return o.fillter=!o.fillter}),t._UZ(9,"span",8),t._uU(10," Filter "),t.qZA(),t.TgZ(11,"button",7),t.NdJ("click",function(){return o.fillterReset()}),t._UZ(12,"span",9),t.qZA()()(),t.TgZ(13,"div",10)(14,"div",11)(15,"h5"),t._uU(16,"Category Wise Outstanding"),t.qZA(),t.YNc(17,b,2,8,"div",12),t.YNc(18,v,4,0,"div",13),t.qZA(),t.TgZ(19,"div",11)(20,"h5"),t._uU(21,"Category Wise Outstanding"),t.qZA(),t.YNc(22,A,2,12,"div",12),t.YNc(23,_,4,0,"div",13),t.qZA()(),t.TgZ(24,"div",10)(25,"div",11)(26,"h5"),t._uU(27,"Type Wise Amount"),t.qZA(),t.YNc(28,y,2,4,"div",12),t.YNc(29,x,4,0,"div",13),t.qZA(),t.TgZ(30,"div",11)(31,"h5"),t._uU(32,"Agening Amount"),t.qZA(),t.YNc(33,O,2,10,"div",12),t.YNc(34,Z,4,0,"div",13),t.qZA()()()()(),t.YNc(35,C,17,1,"div",14)),2&e&&(t.xp6(17),t.Q6J("ngIf",!o.loading&&o.categoryWiseOutstanding),t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(4),t.Q6J("ngIf",!o.loading&&o.vendorWiseOutstanding),t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(5),t.Q6J("ngIf",!o.loading&&o.typeWiseAmount),t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(4),t.Q6J("ngIf",!o.loading&&o.ageningAmount),t.xp6(1),t.Q6J("ngIf",o.loading),t.xp6(1),t.Q6J("ngIf",o.fillter))},dependencies:[d.O5,u.x,r._Y,r.Fj,r.JJ,r.JL,r.sg,r.u],styles:[".bg-white[_ngcontent-%COMP%]{background-color:#fff!important}.bg-light[_ngcontent-%COMP%]{background-color:#eff1f3!important}.bg-primary-2[_ngcontent-%COMP%]{background-color:#031737!important}.w-90[_ngcontent-%COMP%]{width:90%!important;margin-left:5%!important}.border-radius-1[_ngcontent-%COMP%]{border-radius:1.5rem!important}.bg-success-1[_ngcontent-%COMP%]{background-color:#c7f6c5!important}.bg-primary-3[_ngcontent-%COMP%]{background-color:#c6edff!important}.bg-danger-1[_ngcontent-%COMP%]{background-color:#f6c5c5!important}.bg-warning-1[_ngcontent-%COMP%]{background-color:#fffeb1!important}.display-7[_ngcontent-%COMP%]{font-weight:400!important}"]}),n})()}];let T=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[g.Bz.forChild(W),g.Bz]}),n})();var w=a(9102),c=a(4284),D=a(8102);c.XX.plotlyjs=w;let k=(()=>{class n{}return n.\u0275fac=function(e){return new(e||n)},n.\u0275mod=t.oAB({type:n}),n.\u0275inj=t.cJS({imports:[d.ez,T,u.X,c.XX,r.u5,r.UX,D.LayoutModule]}),n})()}}]);