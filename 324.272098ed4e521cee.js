"use strict";(self.webpackChunkoneaj_angular=self.webpackChunkoneaj_angular||[]).push([[324],{4324:(J,m,l)=>{l.r(m),l.d(m,{CreateUserModule:()=>y});var c=l(6895),h=l(4940),s=l(433),g=l(5226),u=l.n(g);class f{constructor(){this.id=0,this.firstName="",this.lastName="",this.userName="",this.crmemail="",this.actualEmail="",this.userType="",this.portals=new p,this.canaccess=new p}}class p{constructor(){this.ar=!1,this.ap=!1,this.gp=!1,this.quotation=!1,this.fileupload=!1}}var e=l(8256),_=l(529),U=l(5620),Z=l(7556);function C(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"tr",5)(1,"td",4),e._uU(2),e.qZA(),e.TgZ(3,"td",4),e._uU(4),e.qZA(),e.TgZ(5,"td",4),e._uU(6),e.qZA(),e.TgZ(7,"td",4),e._uU(8),e.qZA(),e.TgZ(9,"td",4),e._uU(10),e.qZA(),e.TgZ(11,"td")(12,"button",14),e.NdJ("click",function(){const a=e.CHM(t).$implicit,N=e.oxw(3);return e.KtG(N.selectUser(a))}),e._UZ(13,"i",15),e.qZA()()()}if(2&n){const t=i.$implicit,o=i.index;e.xp6(2),e.hij(" ",o+1,""),e.xp6(2),e.hij(" ",t[0],""),e.xp6(2),e.hij(" ",t[1],""),e.xp6(2),e.hij(" ",t[2],""),e.xp6(2),e.hij(" ",t[5]?"Verified":"Not Verified","")}}function b(n,i){if(1&n&&(e.TgZ(0,"tbody"),e.YNc(1,C,14,5,"tr",13),e.qZA()),2&n){const t=e.oxw(2);e.xp6(1),e.Q6J("ngForOf",t.users)}}function x(n,i){if(1&n&&(e.TgZ(0,"div",9)(1,"div",10)(2,"table",11)(3,"tr",5)(4,"th",4),e._uU(5,"#"),e.qZA(),e.TgZ(6,"th",4),e._uU(7,"NAME"),e.qZA(),e.TgZ(8,"th",4),e._uU(9,"EMAIL"),e.qZA(),e.TgZ(10,"th",4),e._uU(11,"CRM EMAIL"),e.qZA(),e.TgZ(12,"th",4),e._uU(13,"Verification Status"),e.qZA(),e.TgZ(14,"th",4),e._uU(15,"Edit"),e.qZA()(),e.YNc(16,b,2,1,"tbody",12),e.qZA()()()),2&n){const t=e.oxw();e.xp6(16),e.Q6J("ngIf",t.users&&t.users.length>0)}}function v(n,i){1&n&&e._UZ(0,"span",43)}const d=function(){return{standalone:!0}};function M(n,i){if(1&n){const t=e.EpF();e.TgZ(0,"div",16)(1,"div",17)(2,"div",3)(3,"div",4)(4,"h2",18),e._uU(5,"Add new user"),e.qZA()(),e.TgZ(6,"div",4)(7,"button",19),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return r.addnewuser=!r.addnewuser,e.KtG(r.newUserForm.reset())}),e._UZ(8,"i",20),e.qZA()()(),e.TgZ(9,"form",21)(10,"div",22)(11,"div",4)(12,"label",23),e._uU(13,"First Name "),e.TgZ(14,"span",24),e._uU(15,"*"),e.qZA()(),e._UZ(16,"input",25),e.qZA()(),e.TgZ(17,"div",26)(18,"div",4)(19,"label",23),e._uU(20,"CRM Email Id "),e.TgZ(21,"span",24),e._uU(22,"*"),e.qZA()(),e._UZ(23,"input",27),e.qZA(),e.TgZ(24,"div",4)(25,"label",23),e._uU(26,"Actual Email Id "),e.TgZ(27,"span",24),e._uU(28,"*"),e.qZA()(),e._UZ(29,"input",28),e.qZA()(),e.TgZ(30,"div",26)(31,"div",4)(32,"label",23),e._uU(33,"Phone Number "),e.TgZ(34,"span",24),e._uU(35,"*"),e.qZA()(),e._UZ(36,"input",29),e.qZA(),e._UZ(37,"div",4),e.qZA(),e.TgZ(38,"div",26)(39,"label",23),e._uU(40,"Can Access"),e.qZA(),e.TgZ(41,"label",30)(42,"input",31),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.role.fileupload=r)}),e.qZA(),e._uU(43," File Upload"),e.qZA(),e.TgZ(44,"label",32)(45,"input",33),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.role.ar=r)}),e.qZA(),e._uU(46," AR Dashboard"),e.qZA(),e.TgZ(47,"label",34)(48,"input",35),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.role.ap=r)}),e.qZA(),e._uU(49," AP Dashboard"),e.qZA(),e.TgZ(50,"label",36)(51,"input",37),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.role.gp=r)}),e.qZA(),e._uU(52," GP Dashboard"),e.qZA(),e.TgZ(53,"label",38)(54,"input",39),e.NdJ("ngModelChange",function(r){e.CHM(t);const a=e.oxw();return e.KtG(a.role.quotation=r)}),e.qZA(),e._uU(55," Quotation Dashboard"),e.qZA()(),e.TgZ(56,"div",40)(57,"div",4)(58,"button",41),e.NdJ("click",function(){e.CHM(t);const r=e.oxw();return e.KtG(r.newUser())}),e.YNc(59,v,1,0,"span",42),e.TgZ(60,"span",5),e._uU(61," Submit"),e.qZA()()()()()()()}if(2&n){const t=e.oxw();e.xp6(9),e.Q6J("formGroup",t.newUserForm),e.xp6(33),e.Q6J("ngModel",t.role.fileupload)("ngModelOptions",e.DdM(13,d)),e.xp6(3),e.Q6J("ngModel",t.role.ar)("ngModelOptions",e.DdM(14,d)),e.xp6(3),e.Q6J("ngModel",t.role.ap)("ngModelOptions",e.DdM(15,d)),e.xp6(3),e.Q6J("ngModel",t.role.gp)("ngModelOptions",e.DdM(16,d)),e.xp6(3),e.Q6J("ngModel",t.role.quotation)("ngModelOptions",e.DdM(17,d)),e.xp6(4),e.Q6J("disabled",t.loader.submitUser),e.xp6(1),e.Q6J("ngIf",t.loader.submitUser)}}const A=[{path:"",component:(()=>{class n{constructor(t,o,r,a){this.formbuilder=t,this.apiService=o,this.commonService=r,this.auth=a,this.expanded=!1,this.addnewuser=!1,this.loader={submitUser:!1,userData:!1},this.selectedUsers=new f,this.role=new p,this.newUserForm=this.formbuilder.group({firstName:["",[s.kI.required]],crm_mailid:["",[s.kI.required]],phonenumber:["",[s.kI.required]],email:["",[s.kI.required]]})}ngOnInit(){this.userlist()}userlist(){this.apiService.post("https://rr9g4neyfg.execute-api.ap-south-1.amazonaws.com/dashboard/",{tenantid:this.auth.currentUserValue.tenantid}).subscribe({next:t=>{this.users=t,console.log(this.users)}})}selectUser(t){const o={firstName:t[0],email:t[1],crm_mailid:t[2],phonenumber:t[3]};this.selectedUsers=t,this.role=t[4],this.addnewuser=!0,this.newUserForm.patchValue(o)}newUser(){this.loader.submitUser=!0;const t=this.newUserForm.value;t.canaccess=this.role,t.username=this.newUserForm.value.firstName,t.tenantid=this.auth.currentUserValue.tenantid,console.log(this.selectedUsers),this.selectedUsers.id>0?this.apiService.patch(this.commonService.apiUrl+"/user/"+this.selectedUsers.id,t,{responseType:"text"}).subscribe({next:o=>{u().fire({position:"top-end",showConfirmButton:!1,timer:3e3,title:"Success!",text:"User updation was successfully completed",icon:"success"}),this.loader.submitUser=!1,this.addnewuser=!1,this.userlist()},error:o=>{u().fire({position:"top-end",showConfirmButton:!1,timer:3e3,title:"Error!",text:"Error while updating user",icon:"warning"}),this.loader.submitUser=!1}}):this.apiService.post("https://2wbzulxh9a.execute-api.ap-south-1.amazonaws.com/dashboard/",t,{responseType:"text"}).subscribe({next:o=>{u().fire({position:"top-end",showConfirmButton:!1,timer:3e3,title:"Success!",text:"New user creation was successfully completed",icon:"success"}),this.loader.submitUser=!1,this.addnewuser=!1,this.userlist()},error:o=>{u().fire({position:"top-end",showConfirmButton:!1,timer:3e3,title:"Error!",text:"Error while creating new user",icon:"warning"}),this.loader.submitUser=!1}})}showCheckboxes(){const t=document.getElementById("checkboxes");this.expanded?(t.style.display="none",this.expanded=!1):(t.style.display="block",this.expanded=!0)}}return n.\u0275fac=function(t){return new(t||n)(e.Y36(s.qu),e.Y36(_.eN),e.Y36(U.v),e.Y36(Z.h))},n.\u0275cmp=e.Xpm({type:n,selectors:[["app-create-user"]],decls:13,vars:2,consts:[[1,"container"],[1,"col","p-5"],[1,"col","p-2","mt-2"],[1,"row"],[1,"col"],[1,""],[1,"btn","btn-outline-dark","float-end",3,"click"],["class","p-0 mt-5",4,"ngIf"],["class","container-fluid p-5 text-white","id","fillter",4,"ngIf"],[1,"p-0","mt-5"],[1,"table-responsive"],[1,"table","table-striped"],[4,"ngIf"],["class","",4,"ngFor","ngForOf"],["target","_blank",1,"btn","btn-outline-primary",3,"click"],[1,"fas","fa-edit"],["id","fillter",1,"container-fluid","p-5","text-white"],["id","filterInside",1,"container","p-5","w-50","m-auto"],[1,"text-white"],["id","closebtn",1,"btn","btn-outline-light","text-right",3,"click"],[1,"fas","fa-times-circle"],["action","",1,"form-group",3,"formGroup"],[1,"row","mt-5"],["for",""],[1,"text-danger"],["type","text","name","firstName","formControlName","firstName","id","firstName","placeholder","Enter first name ...",1,"form-control"],[1,"row","mt-4"],["type","email","name","crm_mailid","formControlName","crm_mailid","id","crm_mailid","placeholder","Enter email id like@syergy.com...",1,"form-control"],["type","email","name","email","formControlName","email","id","email","placeholder","Enter actual email...",1,"form-control"],["type","text","name","phonenumber","formControlName","phonenumber","id","phonenumber","placeholder","Enter mobile number...",1,"form-control"],["for","fileupload",1,"col"],["type","checkbox","id","fileupload","value","fileupload",3,"ngModel","ngModelOptions","ngModelChange"],["for","ar",1,"col"],["type","checkbox","id","ar","value","ar",3,"ngModel","ngModelOptions","ngModelChange"],["for","ap",1,"col"],["type","checkbox","id","ap","value","ap",3,"ngModel","ngModelOptions","ngModelChange"],["for","gp",1,"col"],["type","checkbox","id","gp","value","gp",3,"ngModel","ngModelOptions","ngModelChange"],["for","quotation",1,"col"],["type","checkbox","id","quotation","value","quotation",3,"ngModel","ngModelOptions","ngModelChange"],[1,"row","mt-3"],[1,"btn","btn-outline-light",3,"disabled","click"],["class","spinner-border spinner-border-sm","role","status","aria-hidden","true",4,"ngIf"],["role","status","aria-hidden","true",1,"spinner-border","spinner-border-sm"]],template:function(t,o){1&t&&(e.TgZ(0,"div",0),e._UZ(1,"div",1),e.TgZ(2,"div",2)(3,"div",3)(4,"div",4)(5,"h3",5),e._uU(6,"USER LIST"),e.qZA()(),e.TgZ(7,"div",4)(8,"button",6),e.NdJ("click",function(){return o.addnewuser=!0}),e._uU(9,"Add new user"),e.qZA()()()(),e.TgZ(10,"div",4),e.YNc(11,x,17,1,"div",7),e.qZA()(),e.YNc(12,M,62,18,"div",8)),2&t&&(e.xp6(11),e.Q6J("ngIf",o.users),e.xp6(1),e.Q6J("ngIf",o.addnewuser))},dependencies:[c.sg,c.O5,s._Y,s.Fj,s.Wl,s.JJ,s.JL,s.On,s.sg,s.u]}),n})(),canActivate:[l(5107).a]}];let q=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[h.Bz.forChild(A),h.Bz]}),n})(),y=(()=>{class n{}return n.\u0275fac=function(t){return new(t||n)},n.\u0275mod=e.oAB({type:n}),n.\u0275inj=e.cJS({imports:[c.ez,s.u5,s.UX,q]}),n})()}}]);